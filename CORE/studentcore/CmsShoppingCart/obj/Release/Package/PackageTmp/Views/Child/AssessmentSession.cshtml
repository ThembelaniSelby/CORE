
@model IEnumerable<CmsShoppingCart.Models.Data.Assessment>

@{
    ViewBag.Title = "Assessment";
    Layout = null;
}

<h4>Assessment session</h4>
<div style="color:red" align="right">
    <p id="demo"></p>

</div>

@Model.FirstOrDefault().AssessmentEndDate

<script>
                var datesta = new Date("@Model.FirstOrDefault().AssessmentEndDate.Year/@Model.FirstOrDefault().AssessmentEndDate.Month/@Model.FirstOrDefault().AssessmentEndDate.Day"+" @Model.FirstOrDefault().AssessmentEndDate.TimeOfDay");
                @*if (Date.parse("@DateTime.Now") > Date.parse(datesta)) {
                    date = new Date("@DateTime.UtcNow.Year/@DateTime.UtcNow.Month/@DateTime.UtcNow.Day" + " @item.Overtime:00");
                }
                else {
                     date = new Date("@DateTime.UtcNow.Year/@DateTime.UtcNow.Month/@DateTime.UtcNow.Day"+" @item.OutTime:00");
                }*@

                var newdate = new Date(datesta);
                newdate.setDate(newdate.getDate() + 0);
                var nd = new Date(newdate);
                // Set the date we're counting down to
                var countDownDate = new Date(nd).getTime();
                // Update the count down every 1 second
                var x = setInterval(function () {
                    // Get today's date and time
                    var now = new Date().getTime();
                    // Find the distance between now and the count down date
                    var distance = countDownDate - now;
                    // Time calculations for days, hours, minutes and seconds
                    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                    // Output the result in an element with id="demo"
                    document.getElementById("demo").innerHTML = days + "d " + hours + "h "
                        + minutes + "m " + seconds + "s ";
                    document.getElementById("demo").innerHTML = days + "d " + hours + "h "
                        + minutes + "m " + seconds + "s ";
                    // If the count down is over, write some text
                    if (distance < 0) {
                        clearInterval(x);

                        document.getElementById("demo").innerHTML = "TIME OUT SUBMITING ASSESSMENT";


                        $("#submitassessment").click();

                    }
                }, 1000);
</script>

<table class="table">
    <tr>
        
        <th>
            @Html.DisplayNameFor(model => model.Teacher)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Grade)
        </th>
        <th>
            Contribution in %
        </th>
        <th>
            Date
        </th>
        <th>
            Duration
        </th>
        <th>
            Total Marks
        </th>

    </tr>

    @foreach (var item in Model)
    {
        <tr>
         
            <td>
                @Html.DisplayFor(modelItem => item.Teacher)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Grade)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.WeightInPercent)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.AssessmentDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DurationInHours)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TotalMarks)
            </td>

        </tr>
    }

</table>



